create table category(
ID NUMBER GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_category PRIMARY Key,
name varchar2(255)

);
CREATE OR REPLACE PACKAGE  CATEGORY_PACKAGE AS

    PROCEDURE CATEGORY_CRUD(P_ACTION in varchar DEFAULT NULL 
    ,P_ID IN NUMBER DEFAULT NULL
    ,P_NAME IN VARCHAR DEFAULT NULL);
    
End CATEGORY_PACKAGE;



CREATE OR REPLACE PACKAGE BODY CATEGORY_PACKAGE AS
    
    PROCEDURE CATEGORY_CRUD(P_ACTION in varchar DEFAULT NULL 
    ,P_ID IN NUMBER DEFAULT NULL
    ,P_NAME IN VARCHAR DEFAULT NULL)
    IS
        cate_all SYS_REFCURSOR;
    BEGIN
        IF P_ACTION = 'INSERT' THEN
            INSERT INTO CATEGORY VALUES(DEFAULT,P_NAME); 
            COMMIT;
        ELSIF P_ACTION = 'UPDATE' THEN

            UPDATE CATEGORY SET
                NAME = P_NAME 
            WHERE ID = P_ID;
            COMMIT;

        ELSIF P_ACTION = 'DELETE' THEN
            DELETE CATEGORY WHERE ID = P_ID;
            COMMIT;

        ELSIF P_ACTION = 'GETALL' THEN
            OPEN cate_all FOR SELECT * FROM Category;
            dbms_sql.return_result(cate_all);

        ELSIF P_ACTION = 'GETBYID' THEN
            OPEN cate_all FOR SELECT * FROM CATEGORY WHERE ID = P_ID;
            dbms_sql.return_result(cate_all);
        ELSIF P_ACTION = 'GETBYNAME' THEN
            OPEN cate_all FOR SELECT * FROM CATEGORY WHERE NAME = P_NAME;
            dbms_sql.return_result(cate_all);
        END IF;
    END CATEGORY_CRUD;

END CATEGORY_PACKAGE;