Create Table Like1(
 ID NUMBER GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_like PRIMARY Key,
 createAt Date,
 user_id Number Constraint Fk_like1_User1 REFERENCES User1(ID) on DELETE CASCADE,
 post_id Number Constraint Fk_like1_post REFERENCES POST(ID) on DELETE CASCADE
);

CREATE OR REPLACE PACKAGE  LIKE1_PACKAGE AS

    PROCEDURE Like1_CRUD(P_ACTION in varchar DEFAULT NULL 
    ,P_ID IN NUMBER DEFAULT NULL
    ,P_createAt IN DATE DEFAULT NULL
    ,P_user_id IN NUMBER DEFAULT NULL
    ,P_post_id IN NUMBER DEFAULT NULL
    );
    
End LIKE1_PACKAGE;



CREATE OR REPLACE PACKAGE BODY LIKE1_PACKAGE AS
    
    PROCEDURE Like1_CRUD(P_ACTION in varchar DEFAULT NULL 
    ,P_ID IN NUMBER DEFAULT NULL
    ,P_createAt IN DATE DEFAULT NULL
    ,P_user_id IN NUMBER DEFAULT NULL
    ,P_post_id IN NUMBER DEFAULT NULL
    )
    IS
        like_all SYS_REFCURSOR;
    BEGIN
        IF P_ACTION = 'INSERT' THEN
            INSERT INTO LIKE1 VALUES(DEFAULT,TO_Date(P_createAt , 'dd-mm-yyyy'),P_user_id,P_post_id); 
            COMMIT;
        ELSIF P_ACTION = 'UPDATE' THEN

            UPDATE LIKE1 SET
                CREATEAT = TO_Date(P_createAt , 'dd-mm-yyyy') ,
                USER_ID = P_user_id,
                POST_ID = P_post_id
            WHERE ID = P_ID;
            COMMIT;

        ELSIF P_ACTION = 'DELETE' THEN
            DELETE LIKE1 WHERE ID = P_ID;
            COMMIT;

        ELSIF P_ACTION = 'GETALL' THEN
            OPEN like_all FOR SELECT * FROM LIKE1;
            dbms_sql.return_result(like_all);

        ELSIF P_ACTION = 'GETBYID' THEN
            OPEN like_all FOR SELECT * FROM LIKE1 WHERE ID = P_ID;
            dbms_sql.return_result(like_all);
        END IF;
    END Like1_CRUD;

END LIKE1_PACKAGE;
