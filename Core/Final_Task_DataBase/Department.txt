Create Table Department(
 ID NUMBER GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_Department PRIMARY Key,
 name Varchar2(255)
);

CREATE OR REPLACE PACKAGE  DEPARTMENT_PACKAGE AS

    PROCEDURE DEPARTMENT_CRUD(P_ACTION in varchar DEFAULT NULL 
    ,P_ID IN NUMBER DEFAULT NULL
    ,P_NAME IN VARCHAR DEFAULT NULL);
    
End DEPARTMENT_PACKAGE;



CREATE OR REPLACE PACKAGE BODY DEPARTMENT_PACKAGE AS
    
    PROCEDURE DEPARTMENT_CRUD(P_ACTION in varchar DEFAULT NULL 
    ,P_ID IN NUMBER DEFAULT NULL
    ,P_NAME IN VARCHAR DEFAULT NULL)
    IS
        department_all SYS_REFCURSOR;
    BEGIN
        IF P_ACTION = 'INSERT' THEN
            INSERT INTO DEPARTMENT VALUES(DEFAULT,P_NAME); 
            COMMIT;
        ELSIF P_ACTION = 'UPDATE' THEN

            UPDATE DEPARTMENT SET
                NAME = P_NAME 
            WHERE ID = P_ID;
            COMMIT;

        ELSIF P_ACTION = 'DELETE' THEN
            DELETE DEPARTMENT WHERE ID = P_ID;
            COMMIT;

        ELSIF P_ACTION = 'GETALL' THEN
            OPEN department_all FOR SELECT * FROM DEPARTMENT;
            dbms_sql.return_result(department_all);

        ELSIF P_ACTION = 'GETBYID' THEN
            OPEN department_all FOR SELECT * FROM DEPARTMENT WHERE ID = P_ID;
            dbms_sql.return_result(department_all);
        ELSIF P_ACTION = 'GETBYNAME' THEN
            OPEN department_all FOR SELECT * FROM DEPARTMENT WHERE NAME = P_NAME;
            dbms_sql.return_result(department_all);
        END IF;
    END DEPARTMENT_CRUD;

END DEPARTMENT_PACKAGE;